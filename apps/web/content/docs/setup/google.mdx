---
title: Google OAuth Setup
description: Configure Google Cloud for Calendar API access
---

import { FAQAccordion, FAQAccordionItem } from "@/components/mdx/faq-accordion";
import { SetupChecklist, SetupChecklistItem } from "@/components/mdx/setup-checklist";
import { Callout } from "fumadocs-ui/components/callout";
import { Steps, Step } from "fumadocs-ui/components/steps";

This guide walks through creating a Google Cloud project and configuring OAuth. A single OAuth client handles both dashboard authentication and Google Calendar API access.

<Callout type="warn" title="Token Expiration Warning">
OAuth tokens expire every **7 days** while your app is in "Testing" mode. You'll need to re-authenticate weekly unless you [publish your app](#step-5-publish-app-optional). This is a Google security measure for unpublished apps.
</Callout>

<SetupChecklist title="Quick Reference Checklist">
  <SetupChecklistItem>Created Google Cloud project</SetupChecklistItem>
  <SetupChecklistItem>Enabled Google Calendar API</SetupChecklistItem>
  <SetupChecklistItem>Configured OAuth consent screen</SetupChecklistItem>
  <SetupChecklistItem>Added myself as test user</SetupChecklistItem>
  <SetupChecklistItem>Created OAuth credentials (Web application)</SetupChecklistItem>
  <SetupChecklistItem>Added redirect URI to credentials</SetupChecklistItem>
  <SetupChecklistItem>Copied Client ID and Secret to Vercel</SetupChecklistItem>
</SetupChecklist>

## Step 1: Create Google Cloud Project

<Steps>
<Step>

### Open Console

Go to [Google Cloud Console](https://console.cloud.google.com)

</Step>
<Step>

### Create Project

Click the project dropdown at the top, then **New Project**

</Step>
<Step>

### Name Project

Enter a name like `Notion Calendar Sync` and click **Create**

</Step>
<Step>

### Select Project

Wait for creation, then select your new project from the dropdown

</Step>
</Steps>

## Step 2: Enable Google Calendar API

1. Open the [Google Calendar API](https://console.cloud.google.com/apis/library/calendar-json.googleapis.com) page
2. Click **Enable**

<Callout type="info">
If the API is already enabled, you'll see "Manage" instead of "Enable". No action needed. Otherwise, wait a few seconds for confirmation before proceeding.
</Callout>

## Step 3: Configure OAuth Consent Screen

<Steps>
<Step>

### Open Consent Screen

Go to **APIs & Services** > **OAuth consent screen**

</Step>
<Step>

### Select User Type

Choose **External** (unless you have Google Workspace, then choose Internal)

</Step>
<Step>

### Configure App Info

- **App name**: `Notion Calendar Sync`
- **User support email**: Your email
- **Developer contact email**: Your email

</Step>
<Step>

### Add Scopes

Click **Add or Remove Scopes** and select:
- `.../auth/userinfo.email`
- `.../auth/userinfo.profile`
- `https://www.googleapis.com/auth/calendar`
- `https://www.googleapis.com/auth/calendar.events`

</Step>
<Step>

### Add Test Users

Add your Google email address as a test user

</Step>
</Steps>

## Step 4: Create OAuth Credentials

1. Go to **APIs & Services** > **Credentials**
2. Click **Create Credentials** > **OAuth client ID**
3. Select **Web application**
4. Enter name: `Notion Calendar Sync Web`

### Authorized Redirect URI

Add this URI (replace `your-app` with your Vercel domain):

```
https://your-app.vercel.app/api/auth/callback/google
```

For local development, also add:

```
http://localhost:3000/api/auth/callback/google
```

5. Click **Create**
6. Copy the **Client ID** and **Client Secret**

<Callout type="warn">
Keep your Client Secret secure. Never commit it to version control.
</Callout>

## Step 5: Publish App (Recommended)

<Callout type="warn">
**This step prevents weekly re-authentication.** In "Testing" mode, OAuth tokens expire after 7 days, requiring you to sign in again.
</Callout>

To publish your app and get longer-lived tokens:

1. Go to the [Auth Audience](https://console.cloud.google.com/auth/audience) page
2. Under **Publishing status**, click **Publish App**
3. Confirm the warning about moving to production

### What "Publishing" means:

- **For personal use**: Google will show an "unverified app" warning once, but tokens won't expire weekly
- **No Google review required**: Since you're the only user, no verification process is needed
- **Same functionality**: Publishing doesn't change what your app can do

<Callout type="info" title="Staying in Testing Mode">
If you prefer testing mode, just re-authenticate every 7 days. The While dashboard will show a warning when your token is approaching expiration.
</Callout>

## Environment Variables

After completing this setup, you'll have:

| Variable | Value |
|----------|-------|
| `GOOGLE_CLIENT_ID` | Your OAuth client ID |
| `GOOGLE_CLIENT_SECRET` | Your OAuth client secret |

## Troubleshooting

<FAQAccordion>
  <FAQAccordionItem title="Access Blocked Error">
    - Ensure your email is added as a test user
    - Check that Calendar API is enabled
    - Verify redirect URIs match exactly (including trailing slashes)
  </FAQAccordionItem>
  <FAQAccordionItem title="Invalid Client Error">
    - Double-check Client ID and Secret
    - Ensure credentials are for a Web application, not Desktop
  </FAQAccordionItem>
  <FAQAccordionItem title="Token Expiration">
    - Test users get 7-day tokens
    - Publish app for longer-lived tokens
    - The app handles automatic refresh
  </FAQAccordionItem>
</FAQAccordion>
